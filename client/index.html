<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎭 بازی مافیا - نسخه آنلاین</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="mafia-logo">🎭</div>
            <div class="loading-text">در حال بارگذاری...</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="navbar" class="navbar hidden">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-logo">🎭</span>
                <span class="nav-title">بازی مافیا</span>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link" onclick="showSection('home')">
                    <i class="fas fa-home"></i> خانه
                </a>
                <a href="#" class="nav-link" onclick="showSection('leaderboard')">
                    <i class="fas fa-trophy"></i> جدول امتیازات
                </a>
                <a href="#" class="nav-link" onclick="showSection('profile')">
                    <i class="fas fa-user"></i> پروفایل
                </a>
                <a href="#" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> خروج
                </a>
            </div>
            <div class="nav-user" id="nav-user">
                <!-- User info will be populated here -->
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        
        <!-- Login Section -->
        <section id="login-section" class="auth-section active">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="auth-logo">🎭</div>
                    <h1 class="auth-title">بازی مافیا</h1>
                    <p class="auth-subtitle">ورود به بازی</p>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-username">نام کاربری یا ایمیل</label>
                        <input type="text" id="login-username" name="username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">رمز عبور</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>
                    
                    <button type="submit" class="auth-btn primary">
                        <i class="fas fa-sign-in-alt"></i>
                        ورود
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>حساب کاربری ندارید؟ 
                        <a href="#" onclick="showSection('register')">ثبت نام کنید</a>
                    </p>
                </div>
            </div>
        </section>

        <!-- Register Section -->
        <section id="register-section" class="auth-section">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="auth-logo">🎭</div>
                    <h1 class="auth-title">ثبت نام</h1>
                    <p class="auth-subtitle">ایجاد حساب کاربری جدید</p>
                </div>
                
                <form id="register-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-firstname">نام</label>
                            <input type="text" id="register-firstname" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="register-lastname">نام خانوادگی</label>
                            <input type="text" id="register-lastname" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-username">نام کاربری</label>
                        <input type="text" id="register-username" name="username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">ایمیل (اختیاری)</label>
                        <input type="email" id="register-email" name="email">
                    </div>
                    
                    <div class="form-group">
                        <label for="register-phone">شماره تلفن</label>
                        <input type="tel" id="register-phone" name="phoneNumber" placeholder="09123456789" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-password">رمز عبور</label>
                            <input type="password" id="register-password" name="password" required>
                        </div>
                        <div class="form-group">
                            <label for="register-confirm-password">تکرار رمز عبور</label>
                            <input type="password" id="register-confirm-password" name="confirmPassword" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-referral">کد معرف (اختیاری)</label>
                        <input type="text" id="register-referral" name="referralCode">
                    </div>
                    
                    <button type="submit" class="auth-btn primary">
                        <i class="fas fa-user-plus"></i>
                        ثبت نام
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>قبلاً حساب کاربری دارید؟ 
                        <a href="#" onclick="showSection('login')">وارد شوید</a>
                    </p>
                </div>
            </div>
        </section>

        <!-- Home Section -->
        <section id="home-section" class="main-section">
            <div class="home-container">
                <div class="home-header">
                    <h1 class="home-title">
                        <span class="title-icon">🎭</span>
                        خوش آمدید به بازی مافیا
                    </h1>
                    <p class="home-subtitle">آماده برای شروع ماجراجویی هستید؟</p>
                </div>

                <div class="game-status" id="game-status">
                    <div class="status-card">
                        <div class="status-icon">⏳</div>
                        <div class="status-text">در انتظار اتصال...</div>
                    </div>
                </div>

                <div class="home-actions">
                    <button class="action-btn primary" onclick="joinWaitingRoom()">
                        <i class="fas fa-play"></i>
                        <span>شروع بازی</span>
                    </button>
                    <button class="action-btn secondary" onclick="showSection('rules')">
                        <i class="fas fa-book"></i>
                        <span>قوانین بازی</span>
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">👥</div>
                        <div class="stat-value" id="online-users">0</div>
                        <div class="stat-label">کاربران آنلاین</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🎮</div>
                        <div class="stat-value" id="total-games">0</div>
                        <div class="stat-label">کل بازی‌ها</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🏆</div>
                        <div class="stat-value" id="citizen-win-rate">0%</div>
                        <div class="stat-label">برد شهروندان</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Waiting Room Section -->
        <section id="waiting-section" class="main-section">
            <div class="waiting-container">
                <div class="waiting-header">
                    <h2 class="waiting-title">
                        <span class="title-icon">⏳</span>
                        اتاق انتظار
                    </h2>
                    <p class="waiting-subtitle">در انتظار سایر بازیکنان...</p>
                </div>

                <div class="waiting-info">
                    <div class="info-card">
                        <div class="info-icon">👥</div>
                        <div class="info-content">
                            <div class="info-number" id="waiting-count">0</div>
                            <div class="info-label">بازیکن در انتظار</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">🎯</div>
                        <div class="info-content">
                            <div class="info-number">4</div>
                            <div class="info-label">حداقل برای شروع</div>
                        </div>
                    </div>
                </div>

                <div class="players-list" id="waiting-players">
                    <!-- Players will be populated here -->
                </div>

                <div class="waiting-actions">
                    <button class="action-btn danger" onclick="leaveWaitingRoom()">
                        <i class="fas fa-times"></i>
                        خروج از اتاق انتظار
                    </button>
                </div>
            </div>
        </section>

        <!-- Game Section -->
        <section id="game-section" class="main-section">
            <div class="game-container">
                <div class="game-header">
                    <div class="game-info">
                        <h2 class="game-title" id="game-title">بازی مافیا</h2>
                        <div class="game-phase" id="game-phase">شب 1</div>
                    </div>
                    <div class="game-timer" id="game-timer">30</div>
                </div>

                <div class="game-content">
                    <div class="game-main">
                        <div class="role-info" id="role-info">
                            <!-- Role information will be displayed here -->
                        </div>

                        <div class="players-grid" id="players-grid">
                            <!-- Players will be displayed here -->
                        </div>

                        <div class="game-actions" id="game-actions">
                            <!-- Game actions will be displayed here -->
                        </div>
                    </div>

                    <div class="game-sidebar">
                        <div class="chat-container">
                            <div class="chat-header">
                                <h3>گفتگو</h3>
                            </div>
                            <div class="chat-messages" id="chat-messages">
                                <!-- Chat messages will be displayed here -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chat-input" placeholder="پیام خود را بنویسید...">
                                <button onclick="sendMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="main-section">
            <div class="profile-container">
                <div class="profile-header">
                    <h2 class="profile-title">
                        <span class="title-icon">👤</span>
                        پروفایل کاربری
                    </h2>
                </div>

                <div class="profile-content">
                    <div class="profile-card">
                        <div class="profile-info" id="profile-info">
                            <!-- Profile info will be populated here -->
                        </div>
                    </div>

                    <div class="stats-container">
                        <h3>آمار بازی</h3>
                        <div class="stats-grid" id="profile-stats">
                            <!-- Stats will be populated here -->
                        </div>
                    </div>

                    <div class="history-container">
                        <h3>تاریخچه بازی‌ها</h3>
                        <div class="history-list" id="game-history">
                            <!-- Game history will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section id="leaderboard-section" class="main-section">
            <div class="leaderboard-container">
                <div class="leaderboard-header">
                    <h2 class="leaderboard-title">
                        <span class="title-icon">🏆</span>
                        جدول امتیازات
                    </h2>
                </div>

                <div class="leaderboard-content" id="leaderboard-content">
                    <!-- Leaderboard will be populated here -->
                </div>
            </div>
        </section>

    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
</body>
</html> 