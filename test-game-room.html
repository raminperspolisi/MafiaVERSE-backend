<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎭 تست اتاق بازی مافیا</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tahoma', 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .game-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .phase-indicator {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .player-card {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .player-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.5);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .player-card.dead {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .player-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .player-role {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .player-status {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .game-log {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .log-entry {
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border-right: 4px solid #667eea;
        }

        .log-time {
            color: #ccc;
            font-size: 0.8rem;
        }

        .connection-status {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
        }

        .connected {
            background: #27ae60;
            color: white;
        }

        .disconnected {
            background: #e74c3c;
            color: white;
        }

        .demo-info {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .demo-info h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connectionStatus">🔗 تست محلی</div>
    
    <div class="container">
        <div class="header">
            <h1>🎭 بازی مافیا</h1>
            <p>اتاق بازی آنلاین - نسخه تست</p>
        </div>

        <div class="demo-info">
            <h3>🎯 این یک نسخه تست است</h3>
            <p>برای دیدن بازی واقعی، سرور را اجرا کنید و به <strong>localhost:3000</strong> بروید</p>
        </div>

        <div class="game-status">
            <div>
                <h3>🎮 وضعیت بازی</h3>
                <p>بازیکنان: <span id="playerCount">8</span>/8</p>
            </div>
            <div class="phase-indicator" id="phaseIndicator">روز اول</div>
        </div>

        <div class="game-grid" id="gameGrid">
            <!-- Player cards will be generated here -->
        </div>

        <div class="game-controls">
            <button class="btn" id="voteBtn" onclick="showVoteModal()">🗳️ رای دادن</button>
            <button class="btn" id="actionBtn" onclick="showActionModal()">🔍 عملیات شبانه</button>
            <button class="btn" id="endTurnBtn" onclick="endTurn()">⏭️ پایان نوبت</button>
        </div>

        <div class="game-log" id="gameLog">
            <h3>📝 گزارش بازی</h3>
            <div id="logEntries">
                <div class="log-entry">
                    <div class="log-time">12:00</div>
                    <div>🎮 بازی شروع شد!</div>
                </div>
                <div class="log-entry">
                    <div class="log-time">12:01</div>
                    <div>👥 8 بازیکن وارد بازی شدند</div>
                </div>
                <div class="log-entry">
                    <div class="log-time">12:02</div>
                    <div>🌙 شب اول شروع شد</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vote Modal -->
    <div id="voteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2a5298; padding: 30px; border-radius: 15px; min-width: 300px;">
            <h3>🗳️ رای دادن</h3>
            <div id="voteOptions"></div>
            <button class="btn" onclick="closeVoteModal()">انصراف</button>
        </div>
    </div>

    <!-- Action Modal -->
    <div id="actionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2a5298; padding: 30px; border-radius: 15px; min-width: 300px;">
            <h3>🔍 عملیات شبانه</h3>
            <div id="actionOptions"></div>
            <button class="btn" onclick="closeActionModal()">انصراف</button>
        </div>
    </div>

    <script>
        // Demo data
        const players = [
            { name: 'علی', role: 'شهروند', status: 'زنده', avatar: 'ع' },
            { name: 'فاطمه', role: 'شهروند', status: 'زنده', avatar: 'ف' },
            { name: 'محمد', role: 'مافیا', status: 'زنده', avatar: 'م' },
            { name: 'زهرا', role: 'دکتر', status: 'زنده', avatar: 'ز' },
            { name: 'احمد', role: 'شهروند', status: 'زنده', avatar: 'ا' },
            { name: 'مریم', role: 'کارآگاه', status: 'زنده', avatar: 'م' },
            { name: 'حسن', role: 'مافیا', status: 'زنده', avatar: 'ح' },
            { name: 'نرگس', role: 'شهروند', status: 'زنده', avatar: 'ن' }
        ];

        // Generate player cards
        function generatePlayerCards() {
            const gameGrid = document.getElementById('gameGrid');
            gameGrid.innerHTML = '';
            
            players.forEach((player, index) => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                playerCard.innerHTML = `
                    <div class="player-avatar">${player.avatar}</div>
                    <div class="player-name">${player.name}</div>
                    <div class="player-role">${player.role}</div>
                    <div class="player-status">✅ ${player.status}</div>
                `;
                
                // Add click event to show player info
                playerCard.onclick = () => showPlayerInfo(player);
                gameGrid.appendChild(playerCard);
            });
        }

        function showPlayerInfo(player) {
            alert(`👤 ${player.name}\n🎭 نقش: ${player.role}\n💚 وضعیت: ${player.status}`);
        }

        function showVoteModal() {
            const modal = document.getElementById('voteModal');
            const options = document.getElementById('voteOptions');
            
            options.innerHTML = '';
            players.forEach((player, index) => {
                const button = document.createElement('button');
                button.className = 'btn';
                button.style.margin = '5px';
                button.innerHTML = player.name;
                button.onclick = () => voteForPlayer(player);
                options.appendChild(button);
            });
            
            modal.style.display = 'block';
        }

        function closeVoteModal() {
            document.getElementById('voteModal').style.display = 'none';
        }

        function showActionModal() {
            const modal = document.getElementById('actionModal');
            const options = document.getElementById('actionOptions');
            
            options.innerHTML = '';
            players.forEach((player, index) => {
                const button = document.createElement('button');
                button.className = 'btn';
                button.style.margin = '5px';
                button.innerHTML = player.name;
                button.onclick = () => performAction(player);
                options.appendChild(button);
            });
            
            modal.style.display = 'block';
        }

        function closeActionModal() {
            document.getElementById('actionModal').style.display = 'none';
        }

        function voteForPlayer(player) {
            addLogEntry(`🗳️ رای شما برای ${player.name} ثبت شد`);
            closeVoteModal();
        }

        function performAction(player) {
            addLogEntry(`🔍 عملیات شما روی ${player.name} انجام شد`);
            closeActionModal();
        }

        function endTurn() {
            addLogEntry('⏭️ نوبت شما به پایان رسید');
        }

        function addLogEntry(message) {
            const logEntries = document.getElementById('logEntries');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            
            const now = new Date();
            const time = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            entry.innerHTML = `
                <div class="log-time">${time}</div>
                <div>${message}</div>
            `;
            
            logEntries.appendChild(entry);
            logEntries.scrollTop = logEntries.scrollHeight;
        }

        // Simulate game phases
        function simulateGamePhases() {
            const phases = ['شب اول', 'روز اول', 'شب دوم', 'روز دوم', 'شب سوم', 'روز سوم'];
            let currentPhase = 0;
            
            setInterval(() => {
                document.getElementById('phaseIndicator').textContent = phases[currentPhase];
                addLogEntry(`🔄 فاز جدید: ${phases[currentPhase]}`);
                currentPhase = (currentPhase + 1) % phases.length;
            }, 5000); // Change phase every 5 seconds
        }

        // Initialize when page loads
        window.onload = function() {
            generatePlayerCards();
            simulateGamePhases();
            
            // Add some demo log entries
            setTimeout(() => addLogEntry('🌙 مافیا در حال انتخاب قربانی...'), 2000);
            setTimeout(() => addLogEntry('💊 دکتر در حال انتخاب فرد برای محافظت...'), 4000);
            setTimeout(() => addLogEntry('🔍 کارآگاه در حال تحقیق...'), 6000);
        };
    </script>
</body>
</html> 