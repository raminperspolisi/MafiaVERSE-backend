# 🎭 راهنمای راه‌اندازی تست بازی مافیا

## 📋 پیش‌نیازها

- Node.js (نسخه 14 یا بالاتر)
- npm یا yarn
- MongoDB (اختیاری - برای تست کامل)

## 🚀 راه‌اندازی سریع

### روش 1: استفاده از اسکریپت تست (توصیه شده)

```bash
# در پوشه mafia-web-app
node run-test.js
```

### روش 2: اجرای مستقیم

```bash
# در پوشه mafia-web-app
npm install
node server.js
```

## 🌐 دسترسی به بازی

پس از اجرای سرور، به آدرس زیر بروید:

**http://localhost:3000**

## 🎮 ویژگی‌های تست

### اتاق انتظار
- نمایش بازیکنان حاضر
- دکمه شروع بازی (فقط با 4+ بازیکن)
- اتصال خودکار Socket.IO

### اتاق بازی
- نمایش 8 بازیکن نمونه
- نقش‌های مختلف: شهروند، مافیا، دکتر، کارآگاه
- دکمه‌های عملیات: رای دادن، عملیات شبانه
- گزارش بازی زنده

### رابط کاربری
- طراحی زیبا و مدرن
- پشتیبانی از زبان فارسی
- انیمیشن‌های جذاب
- رابط واکنش‌گرا

## 🔧 تنظیمات تست

فایل `test-config.js` شامل تنظیمات زیر است:

- پورت سرور: 3000
- دیتابیس: MongoDB محلی
- مدت زمان فازها: 30-60 ثانیه
- کاربران تست آماده

## 📱 تست با چندین مرورگر

برای تست کامل بازی:

1. سرور را اجرا کنید
2. در چندین تب یا مرورگر به `localhost:3000` بروید
3. هر تب یک بازیکن جدید خواهد بود
4. منتظر بمانید تا 4 بازیکن جمع شوند
5. بازی شروع می‌شود!

## 🐛 عیب‌یابی

### سرور اجرا نمی‌شود
```bash
# بررسی نسخه Node.js
node --version

# نصب مجدد وابستگی‌ها
rm -rf node_modules package-lock.json
npm install
```

### اتصال Socket.IO برقرار نمی‌شود
- مطمئن شوید سرور در حال اجرا است
- پورت 3000 آزاد باشد
- فایروال اجازه اتصال دهد

### MongoDB خطا می‌دهد
- MongoDB را نصب کنید یا
- سرور را بدون دیتابیس اجرا کنید (حالت تست)

## 📁 ساختار فایل‌ها

```
mafia-web-app/
├── client/
│   └── index.html          # رابط کاربری اصلی
├── server.js               # سرور اصلی
├── run-test.js            # اسکریپت تست
├── test-config.js         # تنظیمات تست
├── package.json           # وابستگی‌ها
└── README.md              # راهنما
```

## 🎯 مراحل بعدی

پس از تست موفق:

1. تنظیمات تولید را بررسی کنید
2. دیتابیس واقعی را پیکربندی کنید
3. امنیت را بهبود دهید
4. ویژگی‌های جدید اضافه کنید

## 📞 پشتیبانی

در صورت بروز مشکل:

1. لاگ‌های سرور را بررسی کنید
2. کنسول مرورگر را چک کنید
3. اتصال شبکه را تست کنید
4. فایل‌های تنظیمات را بررسی کنید

---

**🎉 حالا می‌توانید اتاق بازی مافیا را تست کنید!** 